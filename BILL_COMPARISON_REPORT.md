# HDFC Credit Card Bill Parsing - Comparison Report

**Statement Period:** 19 Sep 2025 - 18 Oct 2025
**Card:** HDFC Infinia
**Analysis Date:** 20 Oct 2025

---

## üìä SUMMARY

| Metric | Count |
|--------|-------|
| **Total Actual Transactions** | 66 |
| **App Extracted Transactions** | 3 |
| **Extraction Rate** | 4.5% |
| **Missing Transactions** | 63 |

---

## ‚úÖ TRANSACTIONS EXTRACTED BY APP

| # | Date | Merchant | Amount | Category |
|---|------|----------|--------|----------|
| 1 | 2025-09-18 | FRESH ZONE | ‚Çπ550.00 | Food |
| 2 | 2025-09-19 | SWIGGY | ‚Çπ421.00 | Food |
| 3 | 2025-09-19 | LIFE STYLE INTERNATIONAL | ‚Çπ1,516.50 | Shopping |

**Total Extracted:** ‚Çπ2,487.50

---

## üìã ALL ACTUAL TRANSACTIONS FROM BILL

### ABHAY A - Domestic Transactions (47 transactions)

| # | Date | Merchant | Amount | Notes |
|---|------|----------|--------|-------|
| 1 | 18/09/2025 | FRESH ZONE BANGALORE | ‚Çπ550.00 | ‚úÖ EXTRACTED |
| 2 | 18/09/2025 | IGST-VPS2626287967547-RATE 18.0 | ‚Çπ105.30 | ‚ùå MISSED (Tax) |
| 3 | 18/09/2025 | IGST-VPS2626287967549-RATE 18.0 | ‚Çπ455.76 | ‚ùå MISSED (Tax) |
| 4 | 19/09/2025 | SWIGGY Bangalore | ‚Çπ421.00 | ‚úÖ EXTRACTED |
| 5 | 19/09/2025 | LIFE STYLE INTERNATIONAL BANGALORE | ‚Çπ1,516.50 | ‚úÖ EXTRACTED |
| 6 | 20/09/2025 | CREDIT CARD PAYMENT Net Banking | ‚Çπ2,75,657.00 | ‚ùå MISSED (Payment - should skip) |
| 7 | 20/09/2025 | ING*BIGBASKET HTTPS://WW | ‚Çπ314.47 | ‚ùå MISSED |
| 8 | 20/09/2025 | Swiggy Limited Bengaluru | ‚Çπ204.00 | ‚ùå MISSED |
| 9 | 21/09/2025 | AMAZON PAY INDIA PRIVATE Bangalore | ‚Çπ1,049.00 | ‚ùå MISSED |
| 10 | 21/09/2025 | FRESH ZONE BENGALURU | ‚Çπ327.00 | ‚ùå MISSED |
| 11 | 24/09/2025 | MAKEMYTRIP INDIA PRIV GURGAON | ‚Çπ503.31 | ‚ùå MISSED |
| 12 | 24/09/2025 | MAKEMYTRIP INDIA PRIV GURGAON | ‚Çπ531.30 | ‚ùå MISSED |
| 13 | 24/09/2025 | AMAZON PAY INDIA PRIVATE Bangalore | ‚Çπ449.00 | ‚ùå MISSED |
| 14 | 25/09/2025 | FRESH ZONE BENGALURU | ‚Çπ400.00 | ‚ùå MISSED |
| 15 | 25/09/2025 | AMAZON PAY INDIA PRIVATE WWW.AMAZON | ‚Çπ174.00 | ‚ùå MISSED |
| 16 | 27/09/2025 | Swiggy Bengaluru | ‚Çπ120.00 | ‚ùå MISSED |
| 17 | 27/09/2025 | Swiggy Bengaluru | ‚Çπ1,035.00 | ‚ùå MISSED |
| 18 | 27/09/2025 | AVENUE FOOD PLAZA PVT BANGALORE | ‚Çπ169.00 | ‚ùå MISSED |
| 19 | 27/09/2025 | DMART AVENUE SUPERMART BANGALORE | ‚Çπ1,247.40 | ‚ùå MISSED |
| 20 | 27/09/2025 | PAPER AND PIE BANGALORE | ‚Çπ672.00 | ‚ùå MISSED |
| 21 | 28/09/2025 | Swiggy Limited Bangalore | ‚Çπ457.00 | ‚ùå MISSED |
| 22 | 28/09/2025 | RAZ*AUTOPE PAYMENT SOL HTTP://AUT | ‚Çπ626.80 | ‚ùå MISSED |
| 23 | 28/09/2025 | IRCTC New Delhi | ‚Çπ950.00 | ‚ùå MISSED |
| 24 | 29/09/2025 | MEESHO BANGALORE | ‚Çπ745.00 | ‚ùå MISSED |
| 25 | 01/10/2025 | IGST-VPS2627522767370-RATE 18.0 | ‚Çπ7.55 | ‚ùå MISSED (Tax) |
| 26 | 02/10/2025 | RAZ*DELIGHTFUL GOURMET HTTPS://WW | ‚Çπ358.00 | ‚ùå MISSED |
| 27 | 03/10/2025 | ANGAAR OOTY | ‚Çπ324.00 | ‚ùå MISSED |
| 28 | 04/10/2025 | JAYARAM HOTELS PVT LTD OOTY | ‚Çπ1,500.00 | ‚ùå MISSED |
| 29 | 05/10/2025 | MEMBER SECRETARY AND CEO IDUKKI | ‚Çπ100.00 | ‚ùå MISSED |
| 30 | 05/10/2025 | EMI PARAKKAT NATURE RESORTS IDUKKI | ‚Çπ3,961.00 | ‚ùå MISSED (EMI) |
| 31 | 05/10/2025 | PARAKKAT NATURE RESORTS IDUKKI | ‚Çπ177.00 | ‚ùå MISSED |
| 32 | 07/10/2025 | N S R HOSPITALITY IDUKKI | ‚Çπ260.00 | ‚ùå MISSED |
| 33 | 07/10/2025 | Cleartrip Private Limited Mumbai | ‚Çπ277.00 | ‚ùå MISSED |
| 34 | 10/10/2025 | Swiggy Limited Bangalore | ‚Çπ519.00 | ‚ùå MISSED |
| 35 | 10/10/2025 | Swiggy Limited Bangalore | ‚Çπ238.00 | ‚ùå MISSED |
| 36 | 11/10/2025 | MILANO ICE CREAM BANGALORE | ‚Çπ360.00 | ‚ùå MISSED |
| 37 | 12/10/2025 | IGST-VPS2628655611273-RATE 18.0 | ‚Çπ7.55 | ‚ùå MISSED (Tax) |
| 38 | 12/10/2025 | RAZ*DELIGHTFUL GOURMET HTTPS://WW | ‚Çπ665.00 | ‚ùå MISSED |
| 39 | 12/10/2025 | FRESH ZONE BENGALURU | ‚Çπ873.00 | ‚ùå MISSED |
| 40 | 12/10/2025 | Swiggy Limited Bangalore | ‚Çπ445.00 | ‚ùå MISSED |
| 41 | 13/10/2025 | AMAZON PAY INDIA PRIVATE WWW.AMAZON | ‚Çπ704.00 | ‚ùå MISSED |
| 42 | 13/10/2025 | RAZ*MANIPALHEBBAL Bengaluru | ‚Çπ900.00 | ‚ùå MISSED |
| 43 | 13/10/2025 | Manipal Hospitals Private BANGALORE | ‚Çπ969.00 | ‚ùå MISSED |
| 44 | 13/10/2025 | ADISHWAR SUPER MARKET BENGALURU | ‚Çπ796.00 | ‚ùå MISSED |
| 45 | 13/10/2025 | ADISHWAR SUPER MARKET BENGALURU | ‚Çπ88.00 | ‚ùå MISSED |
| 46 | 15/10/2025 | MILANO ICE CREAM BANGALORE | ‚Çπ650.00 | ‚ùå MISSED |
| 47 | 16/10/2025 | Swiggy Limited Bangalore | ‚Çπ429.00 | ‚ùå MISSED |
| 48 | 17/10/2025 | EMI TEAM MERAKI PVT LTD BANGALORE | ‚Çπ30,000.00 | ‚ùå MISSED (EMI) |
| 49 | 17/10/2025 | Swiggy Limited Bangalore | ‚Çπ308.00 | ‚ùå MISSED |
| 50 | 18/10/2025 | OFFUS EMI,PRIN NB:04 | ‚Çπ10,891.00 | ‚ùå MISSED (EMI Payment) |
| 51 | 18/10/2025 | OFFUS EMI,PRIN NB:02 | ‚Çπ25,482.00 | ‚ùå MISSED (EMI Payment) |
| 52 | 18/10/2025 | OFFUS EMI,INT NBR:04 | ‚Çπ441.00 | ‚ùå MISSED (EMI Interest) |
| 53 | 18/10/2025 | OFFUS EMI,INT NBR:02 | ‚Çπ1,633.00 | ‚ùå MISSED (EMI Interest) |

### SUGANDHA KUMARI - Add-on Card Transactions (13 transactions)

| # | Date | Merchant | Amount | Notes |
|---|------|----------|--------|-------|
| 54 | 23/09/2025 | AMAZON PAY INDIA PRIVATE Bangalore | ‚Çπ228.40 | ‚ùå MISSED |
| 55 | 25/09/2025 | M V B R RESTAURANTS PRI BANGALORE | ‚Çπ357.00 | ‚ùå MISSED |
| 56 | 25/09/2025 | IBAHANA BEAUTY AND WELL BANGALORE | ‚Çπ1,932.00 | ‚ùå MISSED |
| 57 | 26/09/2025 | AMAZON PAY INDIA PRIVATE Bangalore | ‚Çπ608.25 | ‚ùå MISSED |
| 58 | 26/09/2025 | AMAZON PAY INDIA PRIVATE Bangalore | ‚Çπ-608.25 | ‚ùå MISSED (Reversal - should skip) |
| 59 | 27/09/2025 | Manipalhealth Enterpris BENGALURU | ‚Çπ1,300.00 | ‚ùå MISSED |
| 60 | 27/09/2025 | IBAHANA BEAUTY AND WELL BANGALORE | ‚Çπ1,099.00 | ‚ùå MISSED |
| 61 | 28/09/2025 | AMAZON IN GURGAON | ‚Çπ1,055.08 | ‚ùå MISSED |
| 62 | 28/09/2025 | AMAZON PAY INDIA PRIVATE Bangalore | ‚Çπ231.11 | ‚ùå MISSED |
| 63 | 02/10/2025 | ZUDIO A UNIT OF TRENTL BANGALORE | ‚Çπ338.31 | ‚ùå MISSED |
| 64 | 02/10/2025 | LIFE STYLE INTERNATIONA BANGALORE | ‚Çπ1,197.00 | ‚ùå MISSED |
| 65 | 02/10/2025 | EMI WESTSIDE UNIT OF TRENT BANGALORE | ‚Çπ3,295.00 | ‚ùå MISSED (EMI) |
| 66 | 02/10/2025 | MILANO ICE CREAM BANGALORE | ‚Çπ930.00 | ‚ùå MISSED |
| 67 | 11/10/2025 | CHRONICLES OF HANDI PR BANGALORE | ‚Çπ2,210.00 | ‚ùå MISSED |
| 68 | 16/10/2025 | FRESH ZONE BENGALURU | ‚Çπ260.00 | ‚ùå MISSED |

### International Transactions (3 transactions)

| # | Date | Merchant | Amount | Currency | Notes |
|---|------|----------|--------|----------|-------|
| 69 | 01/10/2025 | OPENAI *CHATGPT SUBSCR OPENAI.COM | ‚Çπ2,097.96 | USD 23.60 | ‚ùå MISSED |
| 70 | 12/10/2025 | CLAUDE.AI SUBSCRIPTION ANTHROPIC | ‚Çπ2,096.42 | USD 23.60 | ‚ùå MISSED |
| 71 | 18/10/2025 | CONSOLIDATED FCY MARKUP FEE | ‚Çπ83.89 | - | ‚ùå MISSED (Fee) |

---

## üîç ANALYSIS

### What Was Extracted Correctly?
- ‚úÖ 3 transactions from first page (18-19 Sep 2025)
- ‚úÖ All extracted transactions had correct dates, merchants, and amounts
- ‚úÖ Categories were correctly inferred (Food, Shopping)

### What Was Missed?
- ‚ùå **63 out of 66 transactions (95.5%)**
- ‚ùå All transactions from pages 2-3
- ‚ùå All add-on card holder transactions (SUGANDHA KUMARI)
- ‚ùå All international transactions
- ‚ùå Multiple Swiggy transactions (only 1 out of ~10 extracted)
- ‚ùå Multiple Fresh Zone transactions (only 1 out of 6 extracted)
- ‚ùå All Amazon Pay transactions
- ‚ùå All EMI transactions
- ‚ùå All tax/GST entries
- ‚ùå Payment reversals and credits

### Root Cause
**The app only uploaded/processed the FIRST PAGE of the PDF!**

The Vision API or file upload process likely only extracted text from page 1, resulting in:
- Only seeing transactions from 18-19 September
- Missing all subsequent dates (20 Sep - 18 Oct)
- Missing multi-page content

---

## üí° RECOMMENDATIONS

### 1. **HIGH PRIORITY: Fix Multi-Page PDF Processing**

The main issue is that only the first page is being processed. Need to:

#### Option A: Process all PDF pages
- Update Vision API call to process all pages
- Concatenate text from all pages before parsing

#### Option B: Convert PDF to images first
- Extract each PDF page as an image
- Process each image with Vision API
- Combine all extracted text

#### Code Location
File: `functions/src/index.ts`
Function: `extractTextFromBill()`

**Current Issue:** Vision API `textDetection()` may only process first page of PDF

**Solution:**
```typescript
// For PDFs, need to process each page
// Option 1: Use PDF library to split pages first
// Option 2: Use Vision API's async batch annotation for multi-page
```

### 2. **MEDIUM PRIORITY: Improve Transaction Filtering**

Currently getting all types of entries. Should skip:
- Credit/payment entries (starting with "CREDIT CARD PAYMENT")
- Reversals (negative amounts or containing "REVERSAL")
- EMI principal/interest entries (containing "OFFUS EMI")
- GST/tax entries (starting with "IGST", "CGST", "SGST")
- Fee entries (containing "MARKUP FEE", "CONSOLIDATED FCY")

**Update Function:** `isExcludedTransaction()` in `functions/src/index.ts:360`

### 3. **LOW PRIORITY: Better Merchant Name Parsing**

HDFC format variations:
- `FRESH ZONEBANGALORE` ‚Üí `FRESH ZONE`
- `Swiggy LimitedBengaluru` ‚Üí `Swiggy`
- `RAZ*DELIGHTFUL GOURMET HTTPS://WW` ‚Üí `DELIGHTFUL GOURMET`

**Update Function:** `cleanMerchantName()` in `functions/src/index.ts:349`

### 4. **Handle Multiple Card Holders**

Bill has transactions from both:
- Primary: ABHAY A
- Add-on: SUGANDHA KUMARI

Should extract from both sections.

---

## üìà EXPECTED IMPROVEMENTS

After implementing fixes:

| Metric | Current | Expected |
|--------|---------|----------|
| Extraction Rate | 4.5% | ~85-90% |
| Transactions Extracted | 3 | ~55-60 |
| Pages Processed | 1 | 4 |

**Note:** Should still skip:
- Payment credits (~1)
- Tax entries (~4)
- EMI payment entries (~4)
- Reversals (~1)

**Valid debit transactions:** ~60 out of 71 total entries

---

## ‚úÖ NEXT STEPS

1. Fix multi-page PDF processing (CRITICAL)
2. Test with full bill again
3. Verify all pages are extracted
4. Refine exclusion filters
5. Improve merchant name cleaning

